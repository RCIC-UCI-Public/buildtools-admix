# Build the module for fftw. 
!include fftw.yaml
!include /opt/rcic/include/rcic-module.yaml
---
- package: fftw Module
  category: TOOLS
  pkgname: "foundation-{{ name }}_{{version}}-module"
  module:
    name: "{{ version }}"
    path: "{{ pkg_defaults.module.path }}/{{category}}/{{ name }}"
    prepend_path:
      - "{{ pkg_defaults.module.prepend_path }}"
      - -d " " LDFLAGS "-Wl,-rpath,{{ root }}/lib" 
      - -d " " LDFLAGS "-L{{ root }}/lib" 
      - -d " " CPPFLAGS "-I{{root}}/include"
    setenv:
      - FFTW_DIR  {{ root }}
      - FFTW_INC  {{ root }}/include
      - FFTW_LIB  {{ root }}/lib
  requires:
    - "foundation-{{ name }}_{{ version }}"
    - rcic-module-support
