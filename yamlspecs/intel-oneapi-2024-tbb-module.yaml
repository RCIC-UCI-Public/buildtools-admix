!include intel-oneapi-module.yaml
---
- versions: !include versions.yaml
  description: |
    Intel Threading Building Blocks {{version}}. Threading Building Blocks (TBB) lets you easily
    write parallel C++ programs that take full advantage of multicore performance, that are portable,
    composable and have future-proof scalability. This version of TBB is from
    OneAPI version {{oneapiversion}}
    Environment Vars: INTEL_TBBHOME = {{tbbpath}}

  oneapiversion: "{{versions.oneAPI.version}}"
  toolversion: "{{versions.oneAPI.toolversion}}"
  hpcversion: "{{versions.oneAPI.hpcversion}}"
  version: "{{hpcversion}}"
  root: "{{versions.oneAPI.nfspath}}/intel/oneAPI/{{oneapiversion}}"
  tbbpath: "{{root}}/tbb/{{hpcversion}}"
  name: intel-tbb
  module:
    setenv: 
      - TBBROOT {{tbbpath}}
      - INTEL_TBBHOME {{tbbpath}}
    prepend_path:
      - CMAKE_PREFIX_PATH {{tbbpath}}
      - CPATH {{tbbpath}}/include
      - -d " " LDFLAGS -L{{tbbpath}}/lib -Wl,-rpath,{{tbbpath}}/lib
      - LIBRARY_PATH {{tbbpath}}/lib
      - LD_LIBRARY_PATH {{tbbpath}}/lib
      - LD_RUN_PATH {{tbbpath}}/lib
      - PKG_CONFIG_PATH {{tbbpath}}/lib/pkgconfig
  provides:
    - "{{name}}/{{version}}"
    - "{{name}}_{{version}}"
