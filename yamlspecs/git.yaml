---
- package: git 
  category: tools
  name: git
  version: 2.23.0
  extension: tar.xz
  vendorurl: https://www.kernel.org/pub/software/scm/git
  vendor_source: "{{vendorurl}}/{{name}}-{{version}}.{{extension}}"
  distman: "{{name}}-manpages-{{version}}.{{extension}}"
  distdoc: "{{name}}-htmldocs-{{version}}.{{extension}}"
  description: |
    Git is a free and open source, distributed version control system designed to
    handle everything from small to very large projects with speed and efficiency. 
    
  pkgname: foundation-{{ name }}_{{version}}
  root: "{{ pkg_defaults.foundation }}/{{ name }}/{{ version }}"
  build:
    configure: ./configure --prefix={{root}} 
    modules: 
    target: 
  install:
    makeinstall: >
      $(MAKE) DESTDIR=$(ROOT) install;
      if [ ! -f $(REDHAT.ROOT)/sources/{{distman}} ]; then \
        wget -O $(REDHAT.ROOT)/sources/{{distman}} {{vendorurl}}/{{distman}}; \
      fi ; 
      mkdir -p $(ROOT)/{{root}}/share/man; 
      /usr/bin/tar -xf $(REDHAT.ROOT)/sources/{{distman}} -C $(ROOT)/{{root}}/share/man --no-same-owner --no-overwrite-dir;
      if [ ! -f $(REDHAT.ROOT)/sources/{{distdoc}} ]; then \
        wget -O $(REDHAT.ROOT)/sources/{{distdoc}} {{vendorurl}}/{{distdoc}}; \
      fi ; 
      mkdir -p $(ROOT)/{{root}}/share/doc; 
      /usr/bin/tar -xf $(REDHAT.ROOT)/sources/{{distdoc}} -C $(ROOT)/{{root}}/share/doc --no-same-owner --no-overwrite-dir;
      /usr/bin/find $(ROOT)/{{root}}/share/doc -type d -exec chmod 755 {} \;
      /usr/bin/find $(ROOT)/{{root}}/share/doc -type f -exec chmod 644 {} \;

  files:
    -  "{{ root }}/*"
